### Шины данных для очень больших инсталляций, или Почему большим компаниям сложно с опенсорсом

{% include notitle [database_internals_tag](../../tags.md#database_internals) %}

![](./_includes/erasure.png ={{pub-cover-size}})

Как технический менеджер в Яндексе я отвечаю за эксплуатацию больших кластеров, через которые мы передаём данные, — для этого мы используем YDB Topics, собственный аналог Apache Kafka, о котором я уже рассказывал.

Но если посмотреть не только на нас, но и на примеры других крупных систем, то становится понятно, почему энтерпрайзу сложно брать готовые опенсорс‑решения. Стоит лишь представить, что бывает, если команда с большими масштабами начинает использовать Apache Kafka.

В этой [статье](https://habr.com/ru/companies/yandex_cloud_and_infra/articles/850758/) я покажу собирательный образ такой крупной системы из нашего опыта общения с большими распределёнными командами, и мы увидим разницу в TCO Apache Kafka и YDB Topics на конкретных цифрах.

### Стоит ли бояться serializable-транзакций больше, чем труднонаходимых багов?

{% include notitle [general_tag](../../tags.md#general) %}

![](./_includes/acid.png ={{pub-cover-size}})

В базах данных транзакции обладают свойствами ACID, где «I» означает изоляцию транзакций при одновременном (concurrent) выполнении.

Наличие (serializable) изоляции гарантирует, что результат транзакций, выполненных параллельно, будет таким же, как если бы они были выполнены в некотором последовательном порядке.

Сериализация выполнения транзакций не бесплатна с точки зрения производительности.

Многие СУБД поддерживают более слабые уровни изоляции, оставляя за разработчиком выбор подходящего. В монолитных СУБД более слабый уровень изоляции часто используется по умолчанию. Так, в PostgreSQL и MySQL это «read committed». В распределённых СУБД чаще по умолчанию более строгие уровни: «repeatable read» в YugabyteDB и TiDB, «serializable» в CockroachDB и YDB.

Слабые уровни изоляции могут быть причиной очень труднонаходимых багов. Причём эти баги могут вызвать уязвимости в безопасности.

Из-за подобных багов уже были украдены миллионы долларов, в частности с биткоин-бирж. Мы [расскажем](https://habr.com/ru/companies/ydb/articles/825768/) о подобных случаях более детально в следующих разделах.

### Как мы повышали производительность очереди сообщений

{% include notitle [practice_tag](../../tags.md#practice) %}

![](./_includes/ydb-topics-perf.png ={{pub-cover-size}})

Работа в Яндексе ставит огромное количество технических вызовов, которые интересно решать. И один из них — это производительность основной очереди сообщений YDB Topics. [Посмотрим](https://habr.com/ru/companies/ydb/articles/824826/), может ли опенсорсный продукт от Яндекса конкурировать с Apache Kafka по производительности.

Меня зовут Зевайкин Александр. Я уже практически 20 лет в IT. Начинал с преподавания в вузе, запускал множество стартапов, руководил командами разработки. В текущий момент я работаю в Яндексе в отделе, занимающимся одной из высоконагруженных систем. Это разработка распределённой базы YDB, в частности, функциональности YDB Topic.

### Миграции схемы данных YDB с Flyway и распределенные блокировки

{% include notitle [practice_tag](../../tags.md#practice) %}

![](./_includes/ydb-flyway.png ={{pub-cover-size}})

[Поговорим](https://habr.com/ru/companies/ydb/articles/815085/) о результатах поддержки инструмента Flyway для управления миграциями схемы данных YDB.

И дополнительно разберем, как мы реализовали распределенную блокировку в Flyway.

### database/sql: плохой, хороший, злой

{% include notitle [database_internals_tag](../../tags.md#database_internals) %}

![](./_includes/database-sql.png ={{pub-cover-size}})

Многие Golang-разработчики  пробовали работать с БД в Go, и у каждого — свои боли. В этой статье разберём библиотеку database/sql как безотносительно конкретной СУБД, так и применительно к YDB. Рассмотрим трудности эксплуатации при использовании драйвера database/sql на проде. А также рассмотрим, что мы делали для решения проблем.

Меня зовут Алексей Мясников, я — руководитель Application Team в команде разработки YDB. Я очень люблю git blame за то, что с его помощью можно проследить, как развивалась инженерная мысль с течением времени и немножко побыть в шкуре разработчика той или иной классной штуки. В [статье](https://habr.com/ru/companies/oleg-bunin/articles/808097/) я расскажу, как реализовать драйвер database/sql для распределённой базы данных, какие проблемы при этом придётся преодолеть и как менялся подход с выходом новых версий Go.


### Как Яндекс создал свою шину данных, чтобы передавать сотни гигабайт в секунду

{% include notitle [database_internals_tag](../../tags.md#database_internals) %}

![](./_includes/ydb-topics.png ={{pub-cover-size}})

10 лет назад сотни серверов Яндекса работали на Apache Kafka®, но в этом продукте нам нравилось далеко не всё. Наши задачи требовали единой шины для передачи всех видов данных: от биллинговых до журналов приложений. Сегодня объёмы достигли уже десятков тысяч именованных наборов сообщений.

При таком количестве данных в Apache Kafka® становилось сложно управлять правами доступа, организовывать распределённую работу нескольких команд и многое другое. Проблемы роста и отсутствие подходящего решения в открытом доступе привели к тому, что мы разработали своё решение YDB Topics и выложили его в опенсорс в составе платформы данных YDB. В этом [посте](https://habr.com/ru/companies/ydb/articles/810907/) расскажу о предпосылках создания продукта, нашей архитектуре передачи данных, возникающих задачах и возможностях, которые появились вместе с YDB Topics.

### Поддержка диалекта YDB в инструменте миграции Liquibase

{% include notitle [practice_tag](../../tags.md#practice) %}

![](./_includes/ydb-liquibase.png ={{pub-cover-size}})

В этой [статье](https://habr.com/ru/companies/ydb/articles/808755/) мы подробно рассмотрим процесс интеграции одного из наиболее известных и широко используемых в мире Java инструментов для управления миграциями - Liquibase - с YDB.

### Перенести проверенную схему бэкапа больших данных из S3 в Yandex Cloud: опыт Битрикс24

{% include notitle [use_cases_tag](../../tags.md#use_cases) %}

![Сравнение производительности PostgreSQL и распределенных СУБД](./_includes/migrate-from-S3-to-cloud.png ={{pub-cover-size}})

Меня зовут Александр, я руковожу направлением больших данных в Битрикс24. Клиенты нашего сервиса хранят миллиарды файлов: от документов до фотографий, — а моя команда предоставляет возможность строить бизнес-аналитику на основе этого множества данных. И нам важно позаботиться об их сохранности.

Более 10 лет назад мы продумали необходимую нам схему репликации объектного хранилища в облаке. Затем файлы клиентов потребовалось перенести в другое облако, и нам очень хотелось также перенести все наши наработки в режиме «Ctrl+C, Сtrl+V».

В [статье](https://habr.com/ru/companies/yandex_cloud_and_infra/articles/791996/) расскажу, как мы организовали резервирование данных в парадигме слабого связывания и как перенесли эту схему в Yandex Cloud без потери важных нам деталей.


### Когда одного Postgres'a мало: сравнение производительности PostgreSQL и распределенных СУБД {2024-pub-habr-ydb-cdc}

{% include notitle [testing_tag](../../tags.md#testing) %}

![Сравнение производительности PostgreSQL и распределенных СУБД](./_includes/pg-ydb.png ={{pub-cover-size}})

Общеизвестно, что PostgreSQL - крайне эффективная СУБД с богатой функциональностью. При этом не секрет, что PostgreSQL масштабируется только вертикально и её производительность ограничена возможностями одного сервера.

Написано много хороших постов, в которых сравнивают архитектуру монолитных и распределенных СУБД. К сожалению, обычно авторы ограничиваются теоретическим сравнением и не приводят конкретные цифры. Данный пост же наоборот основан на эмпирическом исследовании с использованием бенчмарка TPC-C, который является промышленным стандартом для оценки производительности транзакционных СУБД (On-Line Transaction Processing, OLTP).

В этой [статье](https://habr.com/ru/companies/ydb/articles/801587/) мы расскажем, когда именно одного Postgres'a становится мало, и какие возможны компромиссы между производительностью и надежностью. Для тех, кто не готов к компромиссам, мы покажем, что могут предложить такие распределенные СУБД, как CockroachDB и YDB.


### Обновление кешей сервисов в реальном времени с помощью YDB CDC на примере Yandex Monitoring {2024-pub-habr-ydb-cdc}

{% include notitle [database_internals_tag](../../tags.md#database_internals) %}

![Yandex Monitoring: обновление кешей сервисов в реальном времени с помощью YDB CDC](./_includes/ydb-cdc.png ={{pub-cover-size}})

Летом 2023 года Егор Литвиненко (старший разработчик Yandex Observability Platform) рассказывал на Saint Highload в Санкт‑Петербурге о пути внедрения YDB CDC для обновления данных в сервисах, чтобы решить проблему инвалидации кешей. В этой [статье](https://habr.com/ru/companies/oleg-bunin/articles/801603/) будет вся история внедрения с теорией, вопросами, ответами, ошибками, о которых он говорил на выступлении.
