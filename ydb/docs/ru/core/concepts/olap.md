# OLAP

[Online analytical processing (OLAP)](https://ru.wikipedia.org/wiki/OLAP) или интерактивная аналитическая обработка — это подход к обработке данных, позволяющий оперативно получать в структурированном виде срез из большого массива данных для их последующего анализа.

## Архитектура

Архитектура {{ ydb-short-name }} подробно описана в [Обзоре YDB](./index.md#ydb-architecture). Архитектурно база данных разделена на два слоя: хранения и вычисления. Слой хранения отвечает за надёжное и распределённое размещение данных. А слой вычисления делает всё остальное: выполняет над данными запросы, балансирует нагрузку в кластере, предоставляет сервисные функции для управления кластером.

В {{ ydb-short-name }} существует два основных типа таблиц — строковые и колоночные. Для аналитических запросов в основном используются колоночные таблицы<!--, но {{ ydb-short-name }} также позволяет комбинировать запросы к колоночным и строчным таблицам в одной транзакции-->.

Колоночное хранение данных поддерживает партиционирование таблиц и сжатие данных пользователей, что позволяет эффективно хранить и обрабатывать терабайты данных. {{ ydb-short-name }} позволяет максимально эффективно фильтровать столбцы и читать только те части столбцов, которые нужны для выполнения запросов. Аналитические запросы выполняются над большими объемами данных. Поэтому партиционирование делается не по первичному ключу, а по хэшу от него, чтобы один аналитический запрос можно было выполнять параллельно на нескольких серверных процессах {{ ydb-short-name }}.

## Преимущества {{ ydb-short-name }}

В основе преимуществ {{ ydb-short-name }} лежит её архитектура:

1. **Разделение слоёв для вычислений и для хранения данных** позволяет точечно расширять кластер {{ ydb-short-name }}:

    - Если в кластере {{ ydb-short-name }} достаточно ресурсов для хранения, но значительно увеличилось количество запросов к данным, достаточно добавить узлов баз данных для ускорения обработки запросов.

    - Если кластер {{ ydb-short-name }} справляется с обработкой запросов, но количество данных постоянно растёт, необходимо добавить узлов хранения.

<!-- 1. При добавлении новых серверов в кластер {{ ydb-short-name }} необходимо максимально равномерно распределить данные по кластеру, чтобы обрабатывать их параллельно для скорейшего получения результата. **Перешардирование данных** в колоночных таблицах {{ ydb-short-name }} происходит почти мгновенно. Кроме того, при перешардировании колоночных таблиц кластер {{ ydb-short-name }} продолжает обрабатывать поступающие запросы пользователей. -->

## Сценарии

{{ ydb-short-name }} оптимизирована для работы с большими объёмами данных и применяется в сценариях, где требуется эффективная обработка, хранение и анализ данных.

- **Observability**. {{ ydb-short-name }} может использоваться как хранилище телеметрических данных (метрики, логи, трейсы) для обеспечения полной наблюдаемости различных систем.

    <!-- Благодаря поддержке широких таблиц, которые могут включать до 10000 колонок, {{ ydb-short-name }} позволяет создавать витрины для разнородных событий с большим числом полей, что особенно важно для логирования и трассировки сложных систем. -->

    <!-- Кроме того, {{ ydb-short-name }} поддерживает использование S3-совместимых хранилищ и охлаждение данных, что позволяет экономно масштабировать хранение исторических данных без потери в доступности. Такая архитектура делает её подходящей как для оперативного мониторинга, так и для длительного хранения данных с возможностью последующего анализа. -->

- **Аналитическая БД**. {{ ydb-short-name }} может применяться для выполнения сложной аналитики над большими объёмами данных. Она поддерживает стоимостной оптимизатор запросов и перешардирование колоночных таблиц, что делает её подходящей для построения отчётности, дашбордов и проведения ретроспективного анализа событий в системах.
<!-- Что-нибудь ещё? -->

## Аналитические возможности {{ ydb-short-name }}

{{ ydb-short-name }} — это распределённая реляционная база данных, оптимизированная для гибкой загрузки, хранения и аналитической обработки больших данных. Система поддерживает интеграцию с внешними источниками и BI-инструментами, а также сочетает возможности OLTP и OLAP.

- Загрузка данных

    - Параллельная загрузка больших объёмов данных с высокой производительностью.
    - Федеративные запросы: перенос данных из внешних источников (PostgreSQL, Greenplum, S3) для ETL/ELT-сценариев.
    - Шины данных: автоматическая загрузка и синхронизация данных, поддержка CDC.
    - Интеграция: подключение инструментов (FluentBit, LogStash), импорт из JDBC-источников.

- Хранение данных

    - Колоночные таблицы для OLAP<!--, поддержка до 10 000 колонок, смешанные запросы (OLAP+OLTP)-->.
    - Workload Manager: управление ресурсами для пользовательских запросов.
    <!-- - Охлаждение данных: автоматический перенос в S3 с прозрачным доступом и возможностью выполнения SQL-запросов. -->

- Обработка и анализ

    - Стоимостной оптимизатор: построение эффективных планов выполнения аналитических запросов.
    - Интеграция с BI: работа с аналитическими системами (Apache Superset, DataLens, FineBI, Grafana).
    <!-- - DBT -->

## Смотри также

- [{#T}](../analyst/index.md)
- [{#T}](../dev/query-plans-optimization.md)
- [{#T}](../integrations/ingestion/index.md)
- [{#T}](../dev/resource-consumption-management.md)
